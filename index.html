<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Builder</title>
    <script type="text/javascript" src="renderer.js"></script>
  </head>

  <body style="margin:0;">
  <canvas id="outputTarget"></canvas>
    <script type="text/javascript">
	var debug = false;
    
	var manager = new Worker("manager.js");
	var canvas = document.getElementById("outputTarget");
	
	var maxWidth = window.innerWidth;
	var maxHeight = window.innerHeight;
	maxWidth = Math.min(maxWidth,maxHeight);
	maxHeight = maxWidth;
	
	manager.onmessage = function(e){
	    if (debug)
	    {
		console.log("Recieved data to render");
		console.log(e.data)
	    }
	    Renderer.render(canvas,e.data,Math.floor(maxWidth/e.data.length),Math.floor(maxHeight/e.data[0].length));
	};
	
	manager.postMessage("start");
	if (debug)
	  console.log("Started Manager");

    </script>
  </body>
</html>
